# Prod profile: минимальное логирование, быстрый polling, документация отключена
# Уровни логов задаются в logback-spring.xml (springProfile name="prod").
# Переопределить без перезапуска: POST /actuator/loggers/dev.savushkin.scada.mobile.backend
#   {"configuredLevel": "DEBUG"}  ← включить отладку при инциденте
#   {"configuredLevel": "INFO"}   ← вернуть обратно
logging:
  level:
    root: WARN
    dev.savushkin.scada.mobile.backend: INFO

printsrv:
  polling:
    fixed-delay-ms: 500  # Prod: быстрый цикл (0.5 секунды)
  retry:
    max-attempts: 10  # Prod: больше попыток для устойчивости
    max-delay-ms: 10000  # Prod: больше терпения при переподключении

# CORS: prod — только строгий allowlist origins.
# Задайте через переменную окружения (через запятую):
#   CORS_POLICY_ALLOWED_ORIGINS=http://scada.plant.local,https://scada.plant.local
cors:
  policy:
    # ВАЖНО: по умолчанию пусто (запросы с браузера с другого origin будут блокироваться).
    allowed-origins: "${CORS_POLICY_ALLOWED_ORIGINS:}"
    allowed-methods: [ "GET", "POST", "OPTIONS" ]
    allowed-headers: [ "Content-Type", "Authorization" ]
    allow-credentials: false
    max-age-seconds: 3600

# OpenAPI/Swagger UI: отключено в продакшене из соображений безопасности
springdoc:
  api-docs:
    enabled: false
  swagger-ui:
    enabled: false

# Actuator: только нужные endpoints, закрытые от внешней сети
# health — для liveness/readiness probe (если нет /api/v1/commands/health/*)
# loggers — для изменения уровней логов без перезапуска при инциденте
management:
  endpoints:
    web:
      exposure:
        include: "health,loggers"
  # Рекомендуется: вынести Actuator на отдельный порт и закрыть его файрволлом
  # server:
  #   port: 8081
